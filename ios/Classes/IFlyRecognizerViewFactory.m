//////////////////////////////////////////////////////////
// GENERATED BY FLUTTIFY. DO NOT EDIT IT.
//////////////////////////////////////////////////////////

#import "IFlyRecognizerViewFactory.h"
#import "XfiatFluttifyPlugin.h"
#import <objc/runtime.h>

// Dart端一次方法调用所存在的栈, 只有当MethodChannel传递参数受限时, 再启用这个容器
extern NSMutableDictionary<NSString*, NSObject*>* STACK;
// Dart端随机存取对象的容器
extern NSMutableDictionary<NSNumber*, NSObject*>* HEAP;
// 日志打印开关
extern BOOL enableLog;

typedef void (^Handler)(NSObject <FlutterPluginRegistrar> *, NSDictionary<NSString *, NSObject *> *, FlutterResult);

@implementation IFlyRecognizerViewFactory {
  NSObject <FlutterPluginRegistrar> *_registrar;
}

- (instancetype)initWithRegistrar:(NSObject <FlutterPluginRegistrar> *)registrar {
  self = [super init];
  if (self) {
    _registrar = registrar;
  }

  return self;
}

- (NSObject <FlutterPlatformView> *)createWithFrame:(CGRect)frame viewIdentifier:(int64_t)viewId arguments:(id _Nullable)args {
  return [[IFlyRecognizerViewPlatformView alloc] initWithViewId:viewId registrar:_registrar];
}

@end

@implementation IFlyRecognizerViewPlatformView {
  NSObject <FlutterPluginRegistrar> *_registrar;
  NSInteger _viewId;
  NSDictionary<NSString *, Handler> *_handlerMap;
}

- (instancetype)initWithViewId:(NSInteger)viewId registrar:(NSObject <FlutterPluginRegistrar> *)registrar {
  self = [super init];
  if (self) {
    _viewId = viewId;
    _registrar = registrar;
  }

  return self;
}

- (UIView *)view {
  IFlyRecognizerView *view = [[IFlyRecognizerView alloc] init];
  // 这里viewId加1是为了防止往HEAP里放了nil的key, 把HEAP内原先viewId为0的覆盖掉了, 因为nil实际上就是0
  HEAP[@(_viewId + 1)] = view;

  //region handlers
  _handlerMap = @{
      @"IFlyRecognizerView::initWithOrigin": ^(NSObject <FlutterPluginRegistrar> * registrar, NSDictionary<NSString *, id> * args, FlutterResult methodResult) {
          // args
          // struct arg
          NSValue* originValue = (NSValue*) HEAP[@([args[@"origin"] integerValue])];
          CGPoint origin;
          [originValue getValue:&origin];
      
          // ref
          IFlyRecognizerView* ref = (IFlyRecognizerView*) HEAP[(NSNumber*) args[@"refId"]];
      
          // print log
          if (enableLog) {
              NSLog(@"fluttify-objc: IFlyRecognizerView@%@::initWithOrigin(暂未实现参数打印)", args[@"refId"]);
          }
      
          // invoke native method
          id result = [ref initWithOrigin: origin];
      
          // result
          // return a ref
          HEAP[@(((NSObject*) result).hash)] = result;
          methodResult(@(((NSObject*) result).hash));
      },
      @"IFlyRecognizerView::initWithCenter": ^(NSObject <FlutterPluginRegistrar> * registrar, NSDictionary<NSString *, id> * args, FlutterResult methodResult) {
          // args
          // struct arg
          NSValue* centerValue = (NSValue*) HEAP[@([args[@"center"] integerValue])];
          CGPoint center;
          [centerValue getValue:&center];
      
          // ref
          IFlyRecognizerView* ref = (IFlyRecognizerView*) HEAP[(NSNumber*) args[@"refId"]];
      
          // print log
          if (enableLog) {
              NSLog(@"fluttify-objc: IFlyRecognizerView@%@::initWithCenter(暂未实现参数打印)", args[@"refId"]);
          }
      
          // invoke native method
          id result = [ref initWithCenter: center];
      
          // result
          // return a ref
          HEAP[@(((NSObject*) result).hash)] = result;
          methodResult(@(((NSObject*) result).hash));
      },
      @"IFlyRecognizerView::setAutoRotate": ^(NSObject <FlutterPluginRegistrar> * registrar, NSDictionary<NSString *, id> * args, FlutterResult methodResult) {
          // args
          // jsonable arg
          BOOL autoRotate = [args[@"autoRotate"] boolValue];
      
          // ref
          IFlyRecognizerView* ref = (IFlyRecognizerView*) HEAP[(NSNumber*) args[@"refId"]];
      
          // print log
          if (enableLog) {
              NSLog(@"fluttify-objc: IFlyRecognizerView@%@::setAutoRotate(暂未实现参数打印)", args[@"refId"]);
          }
      
          // invoke native method
          [ref setAutoRotate : autoRotate];
      
          // result
          // 无返回值
          methodResult(@"success");
      },
      @"IFlyRecognizerView::setParameterForKey": ^(NSObject <FlutterPluginRegistrar> * registrar, NSDictionary<NSString *, id> * args, FlutterResult methodResult) {
          // args
          // jsonable arg
          NSString* value = (NSString*) args[@"value"];
          // jsonable arg
          NSString* key = (NSString*) args[@"key"];
      
          // ref
          IFlyRecognizerView* ref = (IFlyRecognizerView*) HEAP[(NSNumber*) args[@"refId"]];
      
          // print log
          if (enableLog) {
              NSLog(@"fluttify-objc: IFlyRecognizerView@%@::setParameter(暂未实现参数打印)", args[@"refId"]);
          }
      
          // invoke native method
          BOOL result = [ref setParameter: value forKey: key];
      
          // result
          // 返回值: Value
          methodResult(@(result));
      },
      @"IFlyRecognizerView::parameterForKey": ^(NSObject <FlutterPluginRegistrar> * registrar, NSDictionary<NSString *, id> * args, FlutterResult methodResult) {
          // args
          // jsonable arg
          NSString* key = (NSString*) args[@"key"];
      
          // ref
          IFlyRecognizerView* ref = (IFlyRecognizerView*) HEAP[(NSNumber*) args[@"refId"]];
      
          // print log
          if (enableLog) {
              NSLog(@"fluttify-objc: IFlyRecognizerView@%@::parameterForKey(暂未实现参数打印)", args[@"refId"]);
          }
      
          // invoke native method
          NSString* result = [ref parameterForKey: key];
      
          // result
          // 返回值: jsonable
          methodResult(result);
      },
      @"IFlyRecognizerView::start": ^(NSObject <FlutterPluginRegistrar> * registrar, NSDictionary<NSString *, id> * args, FlutterResult methodResult) {
          // args
      
      
          // ref
          IFlyRecognizerView* ref = (IFlyRecognizerView*) HEAP[(NSNumber*) args[@"refId"]];
      
          // print log
          if (enableLog) {
              NSLog(@"fluttify-objc: IFlyRecognizerView@%@::start(暂未实现参数打印)", args[@"refId"]);
          }
      
          // invoke native method
          BOOL result = [ref start];
      
          // result
          // 返回值: Value
          methodResult(@(result));
      },
      @"IFlyRecognizerView::cancel": ^(NSObject <FlutterPluginRegistrar> * registrar, NSDictionary<NSString *, id> * args, FlutterResult methodResult) {
          // args
      
      
          // ref
          IFlyRecognizerView* ref = (IFlyRecognizerView*) HEAP[(NSNumber*) args[@"refId"]];
      
          // print log
          if (enableLog) {
              NSLog(@"fluttify-objc: IFlyRecognizerView@%@::cancel(暂未实现参数打印)", args[@"refId"]);
          }
      
          // invoke native method
          [ref cancel ];
      
          // result
          // 无返回值
          methodResult(@"success");
      },
      @"IFlyRecognizerView::set_delegate": ^(NSObject <FlutterPluginRegistrar> * registrar, NSDictionary<NSString *, id> * args, FlutterResult methodResult) {
          // print log
          if (enableLog) {
              NSLog(@"IFlyRecognizerView::set_delegate");
          }
      
          // args
      
      
          // ref
          IFlyRecognizerView* ref = (IFlyRecognizerView*) HEAP[(NSNumber*) args[@"refId"]];
      
          ref.delegate = self;
          methodResult(@"success");
      },
      
  };
  //endregion

  //region method call handler
  FlutterMethodChannel *channel = [FlutterMethodChannel
      methodChannelWithName:@"com.fluttify/xfiat_fluttify/IFlyRecognizerView"
            binaryMessenger:[_registrar messenger]];

  __weak __typeof(self)weakSelf = self;
  [channel setMethodCallHandler:^(FlutterMethodCall *methodCall, FlutterResult methodResult) {
    NSDictionary<NSString *, id> *args = (NSDictionary<NSString *, id> *) [methodCall arguments];

    __strong __typeof(weakSelf)strongSelf = weakSelf;
    if (strongSelf->_handlerMap[methodCall.method] != nil) {
      strongSelf->_handlerMap[methodCall.method](strongSelf->_registrar, args, methodResult);
    } else {
      methodResult(FlutterMethodNotImplemented);
    }
  }];
  //endregion
  return view;
}

//region delegate
- (void)onCompleted : (IFlySpeechError*)error
{
  FlutterMethodChannel *channel = [FlutterMethodChannel
      methodChannelWithName:@"IFlySpeechSynthesizerDelegate::Callback"
            binaryMessenger:[_registrar messenger]];
  // print log
  if (enableLog) {
    NSLog(@"IFlySpeechSynthesizerDelegate::onCompleted");
  }

  // convert to jsonable arg
  // ref callback arg
  NSNumber* argerror = @(error.hash);
  HEAP[argerror] = error;

  [channel invokeMethod:@"Callback::IFlySpeechSynthesizerDelegate::onCompleted" arguments:@{@"error": argerror}];
  
}

- (void)onSpeakBegin 
{
  FlutterMethodChannel *channel = [FlutterMethodChannel
      methodChannelWithName:@"IFlySpeechSynthesizerDelegate::Callback"
            binaryMessenger:[_registrar messenger]];
  // print log
  if (enableLog) {
    NSLog(@"IFlySpeechSynthesizerDelegate::onSpeakBegin");
  }

  // convert to jsonable arg
  

  [channel invokeMethod:@"Callback::IFlySpeechSynthesizerDelegate::onSpeakBegin" arguments:@{}];
  
}

- (void)onBufferProgress : (int)progress message: (NSString*)msg
{
  FlutterMethodChannel *channel = [FlutterMethodChannel
      methodChannelWithName:@"IFlySpeechSynthesizerDelegate::Callback"
            binaryMessenger:[_registrar messenger]];
  // print log
  if (enableLog) {
    NSLog(@"IFlySpeechSynthesizerDelegate::onBufferProgressMessage");
  }

  // convert to jsonable arg
  // primitive callback arg
  NSNumber* argprogress = @(progress);
  // jsonable callback arg
  NSString* argmsg = msg;

  [channel invokeMethod:@"Callback::IFlySpeechSynthesizerDelegate::onBufferProgressMessage" arguments:@{@"progress": argprogress, @"msg": argmsg}];
  
}

- (void)onSpeakProgress : (int)progress beginPos: (int)beginPos endPos: (int)endPos
{
  FlutterMethodChannel *channel = [FlutterMethodChannel
      methodChannelWithName:@"IFlySpeechSynthesizerDelegate::Callback"
            binaryMessenger:[_registrar messenger]];
  // print log
  if (enableLog) {
    NSLog(@"IFlySpeechSynthesizerDelegate::onSpeakProgressBeginPosendPos");
  }

  // convert to jsonable arg
  // primitive callback arg
  NSNumber* argprogress = @(progress);
  // primitive callback arg
  NSNumber* argbeginPos = @(beginPos);
  // primitive callback arg
  NSNumber* argendPos = @(endPos);

  [channel invokeMethod:@"Callback::IFlySpeechSynthesizerDelegate::onSpeakProgressBeginPosendPos" arguments:@{@"progress": argprogress, @"beginPos": argbeginPos, @"endPos": argendPos}];
  
}

- (void)onSpeakPaused 
{
  FlutterMethodChannel *channel = [FlutterMethodChannel
      methodChannelWithName:@"IFlySpeechSynthesizerDelegate::Callback"
            binaryMessenger:[_registrar messenger]];
  // print log
  if (enableLog) {
    NSLog(@"IFlySpeechSynthesizerDelegate::onSpeakPaused");
  }

  // convert to jsonable arg
  

  [channel invokeMethod:@"Callback::IFlySpeechSynthesizerDelegate::onSpeakPaused" arguments:@{}];
  
}

- (void)onSpeakResumed 
{
  FlutterMethodChannel *channel = [FlutterMethodChannel
      methodChannelWithName:@"IFlySpeechSynthesizerDelegate::Callback"
            binaryMessenger:[_registrar messenger]];
  // print log
  if (enableLog) {
    NSLog(@"IFlySpeechSynthesizerDelegate::onSpeakResumed");
  }

  // convert to jsonable arg
  

  [channel invokeMethod:@"Callback::IFlySpeechSynthesizerDelegate::onSpeakResumed" arguments:@{}];
  
}

- (void)onSpeakCancel 
{
  FlutterMethodChannel *channel = [FlutterMethodChannel
      methodChannelWithName:@"IFlySpeechSynthesizerDelegate::Callback"
            binaryMessenger:[_registrar messenger]];
  // print log
  if (enableLog) {
    NSLog(@"IFlySpeechSynthesizerDelegate::onSpeakCancel");
  }

  // convert to jsonable arg
  

  [channel invokeMethod:@"Callback::IFlySpeechSynthesizerDelegate::onSpeakCancel" arguments:@{}];
  
}

- (void)onEvent : (int)eventType arg0: (int)arg0 arg1: (int)arg1 data: (NSData*)eventData
{
  FlutterMethodChannel *channel = [FlutterMethodChannel
      methodChannelWithName:@"IFlySpeechSynthesizerDelegate::Callback"
            binaryMessenger:[_registrar messenger]];
  // print log
  if (enableLog) {
    NSLog(@"IFlySpeechSynthesizerDelegate::onEventArg0arg1data");
  }

  // convert to jsonable arg
  // primitive callback arg
  NSNumber* argeventType = @(eventType);
  // primitive callback arg
  NSNumber* argarg0 = @(arg0);
  // primitive callback arg
  NSNumber* argarg1 = @(arg1);
  // ref callback arg
  NSNumber* argeventData = @(eventData.hash);
  HEAP[argeventData] = eventData;

  [channel invokeMethod:@"Callback::IFlySpeechSynthesizerDelegate::onEventArg0arg1data" arguments:@{@"eventType": argeventType, @"arg0": argarg0, @"arg1": argarg1, @"eventData": argeventData}];
  
}

- (void)onResult : (NSArray*)resultArray isLast: (BOOL)isLast
{
  FlutterMethodChannel *channel = [FlutterMethodChannel
      methodChannelWithName:@"IFlyRecognizerViewDelegate::Callback"
            binaryMessenger:[_registrar messenger]];
  // print log
  if (enableLog) {
    NSLog(@"IFlyRecognizerViewDelegate::onResultIsLast");
  }

  // convert to jsonable arg
  // list callback arg
  NSMutableArray<NSNumber*>* argresultArray = [NSMutableArray arrayWithCapacity:resultArray.count];
  for (int i = 0; i < resultArray.count; i++) {
      NSObject* item = ((NSObject*) [resultArray objectAtIndex:i]);
      // return to dart side data
      argresultArray[i] = @(item.hash);
      // add to HEAP
      HEAP[@(item.hash)] = item;
  }
  // primitive callback arg
  NSNumber* argisLast = @(isLast);

  [channel invokeMethod:@"Callback::IFlyRecognizerViewDelegate::onResultIsLast" arguments:@{@"resultArray": argresultArray, @"isLast": argisLast}];
  
}

- (void)onIFlyRecorderBuffer : (const void*)buffer bufferSize: (int)size
{
  FlutterMethodChannel *channel = [FlutterMethodChannel
      methodChannelWithName:@"IFlyPcmRecorderDelegate::Callback"
            binaryMessenger:[_registrar messenger]];
  // print log
  if (enableLog) {
    NSLog(@"IFlyPcmRecorderDelegate::onIFlyRecorderBufferBufferSize");
  }

  // convert to jsonable arg
  // ref callback arg
  NSNumber* argbuffer = @([NSValue valueWithPointer:buffer].hash);
  HEAP[argbuffer] = [NSValue valueWithPointer:buffer];
  // primitive callback arg
  NSNumber* argsize = @(size);

  [channel invokeMethod:@"Callback::IFlyPcmRecorderDelegate::onIFlyRecorderBufferBufferSize" arguments:@{@"buffer": argbuffer, @"size": argsize}];
  
}

- (void)onIFlyRecorderError : (IFlyPcmRecorder*)recoder theError: (int)error
{
  FlutterMethodChannel *channel = [FlutterMethodChannel
      methodChannelWithName:@"IFlyPcmRecorderDelegate::Callback"
            binaryMessenger:[_registrar messenger]];
  // print log
  if (enableLog) {
    NSLog(@"IFlyPcmRecorderDelegate::onIFlyRecorderErrorTheError");
  }

  // convert to jsonable arg
  // ref callback arg
  NSNumber* argrecoder = @(recoder.hash);
  HEAP[argrecoder] = recoder;
  // primitive callback arg
  NSNumber* argerror = @(error);

  [channel invokeMethod:@"Callback::IFlyPcmRecorderDelegate::onIFlyRecorderErrorTheError" arguments:@{@"recoder": argrecoder, @"error": argerror}];
  
}

- (void)onIFlyRecorderVolumeChanged : (int)power
{
  FlutterMethodChannel *channel = [FlutterMethodChannel
      methodChannelWithName:@"IFlyPcmRecorderDelegate::Callback"
            binaryMessenger:[_registrar messenger]];
  // print log
  if (enableLog) {
    NSLog(@"IFlyPcmRecorderDelegate::onIFlyRecorderVolumeChanged");
  }

  // convert to jsonable arg
  // primitive callback arg
  NSNumber* argpower = @(power);

  [channel invokeMethod:@"Callback::IFlyPcmRecorderDelegate::onIFlyRecorderVolumeChanged" arguments:@{@"power": argpower}];
  
}

- (void)onResults : (IFlyIdentityResult*)results isLast: (BOOL)isLast
{
  FlutterMethodChannel *channel = [FlutterMethodChannel
      methodChannelWithName:@"IFlyIdentityVerifierDelegate::Callback"
            binaryMessenger:[_registrar messenger]];
  // print log
  if (enableLog) {
    NSLog(@"IFlyIdentityVerifierDelegate::onResultsIsLast");
  }

  // convert to jsonable arg
  // ref callback arg
  NSNumber* argresults = @(results.hash);
  HEAP[argresults] = results;
  // primitive callback arg
  NSNumber* argisLast = @(isLast);

  [channel invokeMethod:@"Callback::IFlyIdentityVerifierDelegate::onResultsIsLast" arguments:@{@"results": argresults, @"isLast": argisLast}];
  
}

- (void)onEvent : (int)eventType arg1: (int)arg1 arg2: (int)arg2 extra: (id)obj
{
  FlutterMethodChannel *channel = [FlutterMethodChannel
      methodChannelWithName:@"IFlyIdentityVerifierDelegate::Callback"
            binaryMessenger:[_registrar messenger]];
  // print log
  if (enableLog) {
    NSLog(@"IFlyIdentityVerifierDelegate::onEventArg1arg2extra");
  }

  // convert to jsonable arg
  // primitive callback arg
  NSNumber* argeventType = @(eventType);
  // primitive callback arg
  NSNumber* argarg1 = @(arg1);
  // primitive callback arg
  NSNumber* argarg2 = @(arg2);
  // ref callback arg
  NSNumber* argobj = @(((NSObject*) obj).hash);
  HEAP[argobj] = ((NSObject*) obj);

  [channel invokeMethod:@"Callback::IFlyIdentityVerifierDelegate::onEventArg1arg2extra" arguments:@{@"eventType": argeventType, @"arg1": argarg1, @"arg2": argarg2, @"obj": argobj}];
  
}

- (void)onResult : (NSDictionary*)dic
{
  FlutterMethodChannel *channel = [FlutterMethodChannel
      methodChannelWithName:@"IFlyISVDelegate::Callback"
            binaryMessenger:[_registrar messenger]];
  // print log
  if (enableLog) {
    NSLog(@"IFlyISVDelegate::onResult");
  }

  // convert to jsonable arg
  // ref callback arg
  NSNumber* argdic = @(dic.hash);
  HEAP[argdic] = dic;

  [channel invokeMethod:@"Callback::IFlyISVDelegate::onResult" arguments:@{@"dic": argdic}];
  
}

- (void)onRecognition 
{
  FlutterMethodChannel *channel = [FlutterMethodChannel
      methodChannelWithName:@"IFlyISVDelegate::Callback"
            binaryMessenger:[_registrar messenger]];
  // print log
  if (enableLog) {
    NSLog(@"IFlyISVDelegate::onRecognition");
  }

  // convert to jsonable arg
  

  [channel invokeMethod:@"Callback::IFlyISVDelegate::onRecognition" arguments:@{}];
  
}

- (void)onVolumeChanged : (int)volume
{
  FlutterMethodChannel *channel = [FlutterMethodChannel
      methodChannelWithName:@"IFlyISVDelegate::Callback"
            binaryMessenger:[_registrar messenger]];
  // print log
  if (enableLog) {
    NSLog(@"IFlyISVDelegate::onVolumeChanged");
  }

  // convert to jsonable arg
  // primitive callback arg
  NSNumber* argvolume = @(volume);

  [channel invokeMethod:@"Callback::IFlyISVDelegate::onVolumeChanged" arguments:@{@"volume": argvolume}];
  
}

- (void)onBeginOfSpeech 
{
  FlutterMethodChannel *channel = [FlutterMethodChannel
      methodChannelWithName:@"IFlyVoiceWakeuperDelegate::Callback"
            binaryMessenger:[_registrar messenger]];
  // print log
  if (enableLog) {
    NSLog(@"IFlyVoiceWakeuperDelegate::onBeginOfSpeech");
  }

  // convert to jsonable arg
  

  [channel invokeMethod:@"Callback::IFlyVoiceWakeuperDelegate::onBeginOfSpeech" arguments:@{}];
  
}

- (void)onEndOfSpeech 
{
  FlutterMethodChannel *channel = [FlutterMethodChannel
      methodChannelWithName:@"IFlyVoiceWakeuperDelegate::Callback"
            binaryMessenger:[_registrar messenger]];
  // print log
  if (enableLog) {
    NSLog(@"IFlyVoiceWakeuperDelegate::onEndOfSpeech");
  }

  // convert to jsonable arg
  

  [channel invokeMethod:@"Callback::IFlyVoiceWakeuperDelegate::onEndOfSpeech" arguments:@{}];
  
}

- (void)onEvent : (int)eventType isLast: (BOOL)isLast arg1: (int)arg1 data: (NSMutableDictionary*)eventData
{
  FlutterMethodChannel *channel = [FlutterMethodChannel
      methodChannelWithName:@"IFlyVoiceWakeuperDelegate::Callback"
            binaryMessenger:[_registrar messenger]];
  // print log
  if (enableLog) {
    NSLog(@"IFlyVoiceWakeuperDelegate::onEventIsLastarg1data");
  }

  // convert to jsonable arg
  // primitive callback arg
  NSNumber* argeventType = @(eventType);
  // primitive callback arg
  NSNumber* argisLast = @(isLast);
  // primitive callback arg
  NSNumber* argarg1 = @(arg1);
  // ref callback arg
  NSNumber* argeventData = @(eventData.hash);
  HEAP[argeventData] = eventData;

  [channel invokeMethod:@"Callback::IFlyVoiceWakeuperDelegate::onEventIsLastarg1data" arguments:@{@"eventType": argeventType, @"isLast": argisLast, @"arg1": argarg1, @"eventData": argeventData}];
  
}

//endregion

@end
